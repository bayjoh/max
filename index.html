<html>
<head>
	<title>Gallery</title>
	<link rel="stylesheet" type="text/css" href="styles/styles.css" />
</head>



<body>
<div id="placeholder"><img src="1.jpg"></div>
<ul id="thumbs">
	<li><a href="1.jpg"><img src="1.jpg"></a></li>
	<li><a href="2.jpg"><img src="2.jpg"></a></li>
	<li><a href="3.jpg"><img src="3.jpg"></a></li>
	<li><a href="4.jpg"><img src="4.jpg"></a></li>
   
</ul>
<script type="text/javascript">
/**
 * This is the entry point to the program
 *
 * @param {array} input Array of student objects
 */

const t = [
  {
    name: 'Hendrick',
    dob: '1853-07-18T00:00:00.000Z',
    regNo: '041',
  },
  {
    name: 'Albert',
    dob: '1879-03-14T00:00:00.000Z',
    regNo: '033',
  },
  {
    name: 'Marie',
    dob: '1867-11-07T00:00:00.000Z',
    regNo: '024',
  },
  {
    name: 'Neils',
    dob: '1885-10-07T00:00:00.000Z',
    regNo: '02',
  },
  {
    name: 'Max',
    dob: '1858-04-23T00:00:00.000Z',
    regNo: '014',
  },
  {
    name: 'Erwin',
    dob: '1887-08-12T00:00:00.000Z',
    regNo: '09',
  },
  {
    name: 'Auguste',
    dob: '1884-01-28T00:00:00.000Z',
    regNo: '08',
  },
  {
    name: 'Karl',
    dob: '1901-12-05T00:00:00.000Z',
    regNo: '120',
  },
  {
    name: 'Louis', //
    dob: '1892-08-15T00:00:00.000Z',
    regNo: '022',
  },
  {
    name: 'Arthur',
    dob: '1892-09-10T00:00:00.000Z',
    regNo: '321',
  },
  {
    name: 'Paul',
    dob: '1902-08-08T00:00:00.000Z',
    regNo: '055',
  },
  {
    name: 'William',
    dob: '1890-03-31T00:00:00.000Z',
    regNo: '013',
  },
  {
    name: 'Owen',
    dob: '1879-04-26T00:00:00.000Z',
    regNo: '052',
  },
  {
    name: 'Martin',
    dob: '1871-02-15T00:00:00.000Z',
    regNo: '063',
  },
  {
    name: 'Guye',
    dob: '1866-10-15T00:00:00.000Z',
    regNo: '084',
  },
  {
    name: 'Charles',
    dob: '1868-02-14T00:00:00.000Z',
    regNo: '091',
  },
];


function classifier(input) {
  // Your code should go here.
  var len= input.length;
  var result = {};
  result["noOfGroups"] = 0;
  for (var i = 0; i < len ; i++)
  {
    var birthDate = new Date(input[i].dob);
    var birthYear = birthDate.getUTCFullYear();
    var birthMonth = birthDate.getUTCMonth();
    var birthDay = birthDate.getUTCDate();
    var currentDate = new Date();
        var currentYear = currentDate.getFullYear();
        var currentMonth = currentDate.getUTCMonth();
        var currentDay = currentDate.getUTCDate();
    var age = currentYear - birthYear;
    if (currentMonth < birthMonth|| currentMonth == birthMonth && currentDay < birthDay)
    { 
    	input[i]["age"] = age--;
    }
    else
    {
    	input[i]["age"]=age;
    }
  }

     input.sort(function(a, b) { return a.age - b.age; });
     for (var i = 0; i < len ; i++)
    { 
  	   console.log(input[i]);
  	}

     var num = 1;
     var groupName;
     var i =0;
     var res= 0;
     
  	 while( i < len)
     {  
          var groupName = "group"+num;
          result[groupName] = {};
           result[groupName]["members"]= [];
           result[groupName]["members"].push(input[i]);
           result[groupName]["regNos"] = [];
           result[groupName]["regNos"].push(input[i].regNo); 
           result[groupName]["oldest"] = input[i].age ;
           result[groupName]["sum"]= input[i].age;         
           if(result[groupName]["members"].length < 3)
           {
  

                 res= result[groupName].oldest - input[i].age; 

              while(res <= 5)
              {
                 result[groupName]["members"].push(input[i+1]);
                 result[groupName]["oldest"] = Math.max(result[groupName].oldest, input[i+1].age );
                 result[groupName]["sum"]= input[i+1].age + result[groupName].sum ;
                 result[groupName]["regNos"].push(input[i+1].regNo);
                 result[groupName]["regNos"].sort();
                 i= i +1;; 
                 res= res + (input[i+1].age - input[i].age); 

             
           }

         }
          else
          {
            res = 0;
          }


        i++;
  	    result["noOfGroups"] = num;
  	    num++;
  	 }



  	console.log(result);
}
classifier(t);
//module.exports = classifier;
</script>
</body>
</html>